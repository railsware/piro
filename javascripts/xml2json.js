((function(){var a;a=typeof global!="undefined"&&global!==null?global:window,a.XML2JSON={_parseAttributes:function(a,b,c){var d,e,f,g,h,i,j;if(c){i=a.attributes;for(e=0,g=i.length;e<g;e++)d=i[e],b[d.nodeName]=d.nodeValue}else{b["@attributes"]={},j=a.attributes;for(f=0,h=j.length;f<h;f++)d=j[f],b["@attributes"][d.nodeName]=d.nodeValue}return b},_parseChildren:function(a,b,c){var d,e,f,g,h,i,j;j=a.childNodes;for(h=0,i=j.length;h<i;h++)e=j[h],d=this.parse(e,c),e.nodeType===1?(f=e.localName,b[f]?(b[f]instanceof Array||(b[f]=[b[f]]),b[f][b[f].length]=d):b[f]=d):e.nodeType===3&&(f="@text",g=d.replace(/^\s+/,"").replace(/\s+$/,""),g!==""&&(b[f]=g)),(!a.hasAttributes()||a.hasAttributes()&&a.attributes.length===1&&a.attributes[0].nodeName==="type")&&a.childNodes.length===1&&b["@text"]&&(b=b["@text"]);return b},parse:function(a,b){var c,d;b==null&&(b=!1),typeof a=="string"&&(a=(new DOMParser).parseFromString(a,"text/xml")),c={};if(a.nodeType===9)return d=a.childNodes[0].localName,c[d]=this.parse(a.childNodes[0],b),c;if(a.nodeType===1)a.hasAttributes()&&(c=this._parseAttributes(a,c,b));else if(a.nodeType===3)return c=a.nodeValue,c;return a.hasChildNodes()&&(c=this._parseChildren(a,c,b)),c}}})).call(this)
